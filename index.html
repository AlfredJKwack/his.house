<!DOCTYPE html>
<html>
<head>

  <meta charset=utf-8 />
  <title>His house</title>

  <link rel='shortcut icon' href='favicon.ico' type='image/x-icon' />
  <meta charset='UTF-8'/>
  <meta name='robots' content='noindex, nofollow' />
  <meta http-equiv='X-UA-Compatible' content='IE=edge' />
  <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />  

  <meta name='twitter:site' content='His House'>
  <meta property='og:site_name' content='His House' />
  <meta name='twitter:url' content='http://his.house/' />
  <meta property='og:url' content='http://his.house/'>
  <meta name='twitter:title' content='His house' />
  <meta property='og:title' content='His house' />
  <meta name='twitter:description' content='A painstakingly intricate map to his house, past present and who knows future.' />
  <meta property='og:description' content='A painstakingly intricate map to his house, past present and who knows future.' />
  <meta name='twitter:image' content='https://a.tiles.mapbox.com/v4/examples.a4c252ab/16/33549/21623@2x.png?access_token=pk.eyJ1IjoiYWxmcmVkamt3YWNrIiwiYSI6ImNqZGhheXpoeDB1ZjIyeHBpNjRhNnIwdDAifQ.4lJHofm8CBd2lKB7djcepQ' />
  <meta property='og:image' content='https://a.tiles.mapbox.com/v4/examples.a4c252ab/16/33549/21623@2x.png?access_token=pk.eyJ1IjoiYWxmcmVkamt3YWNrIiwiYSI6ImNqZGhheXpoeDB1ZjIyeHBpNjRhNnIwdDAifQ.4lJHofm8CBd2lKB7djcepQ' />
  <meta name='twitter:image:width' content='512'>
  <meta name='twitter:image:height' content='512'>
  <meta property='og:image:width' content='512'>
  <meta property='og:image:height' content='5125'>
  <meta name='twitter:card' content='summary_large_image'>
  <meta property='og:type' content='website' />
  <base target='_parent' />

  <script type="text/javascript" src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
  <script type="text/javascript" src='https://api.mapbox.com/mapbox.js/v3.1.1/mapbox.js'></script>
  <link href='https://api.mapbox.com/mapbox.js/v3.1.1/mapbox.css' rel='stylesheet' />

  <style>
    body { margin:0; padding:0; }
    #map { position:absolute; top:0; bottom:0; width:100%; }
    .story {position: absolute; top:1em; right: 1em;}
    .story button {margin: 0.2em;padding: 0.2em; background-color: white;}
  </style>

</head>

<body>
  <div id='map'></div>

  <section class="story">
    <button class="story-btn" id="fly-to-thehague"  >Now        </button>
    <button class="story-btn" id="fly-to-chantilly" >Recently   </button>
    <button class="story-btn" id="fly-to-boitsfort" >Adulthood  </button>
    <button class="story-btn" id="fly-to-ixelles2"  >College    </button>
    <button class="story-btn" id="fly-to-ixelles1"  >Indepence  </button>
    <button class="story-btn" id="fly-to-berg"      >Youth      </button>
  </section>

  <script>
    var locations = {
      TheHague    : [52.103210, 4.315351],
      Boitsfort   : [50.807869, 4.402557],
      Chantilly   : [49.195213, 2.467015],
      Ixelles1    : [50.822225, 4.363848],
      Ixelles2    : [50.815861, 4.378379],
      Berg        : [50.929705, 4.547924]
    };

    /*  -----------                     -----------
              Set up your map and display it 
        -----------                     -----------  */  

    L.mapbox.accessToken = 'pk.eyJ1IjoiYWxmcmVkamt3YWNrIiwiYSI6ImNqZGhheXpoeDB1ZjIyeHBpNjRhNnIwdDAifQ.4lJHofm8CBd2lKB7djcepQ';
    var mapboxTiles = L.tileLayer('https://api.mapbox.com/v4/examples.a4c252ab/{z}/{x}/{y}{r}.png?access_token=' + L.mapbox.accessToken, {
      attribution: '© <a href="https://www.mapbox.com/feedback/">Mapbox</a> © <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
    });
    var map = L.map('map',{ minZoom: 10, maxZoom: 17 }).addLayer( mapboxTiles ).setView( locations.TheHague, 15 );

    /*  -----------                     -----------
              Add location markers to the map 
        -----------                     -----------  */  
    var addMarker = function(latlng) {
      
      var icn = {
        icon: L.mapbox.marker.icon({
          'marker-size'   : 'small',
          'marker-symbol' : 'rocket',
          'marker-color'  : '#B8001E'
        })
      };

      L.marker( latlng, icn )
       .addTo( map )
       .on( 'click', function(e) { 
          map.panTo(latlng,{easeLinearity : 0.05, duration: 1});
          // add a check for zooom level and zoom in/out as necessary
        });
    
    };

    for (var key in locations) {
      if (locations.hasOwnProperty(key)) {
        addMarker( locations[key] );   
      }
    }

    /*  -----------                     -----------
              Add the ability to fly around 
        -----------                     -----------  */  

    // NOTE: Preload high level zooms so that you have them available in cache.

    $('#fly-to-thehague').on('click', function(){
      //$(all_buttons).removeClass('pure-button-disabled');
      // probably want something that looks at whether a marker is on the map, and at what zoom level we are.
      
      map.flyTo(locations.TheHague, 10);
    });
    $('#fly-to-chantilly').on('click', function(){
      //$(all_buttons).removeClass('pure-button-disabled');
      // probably want something that looks at whether a marker is on the map, and at what zoom level we are.
      
      map.flyTo(locations.Chantilly, 10);
    });
    $('#fly-to-boitsfort').on('click', function(){
      //$(all_buttons).removeClass('pure-button-disabled');
      // probably want something that looks at whether a marker is on the map, and at what zoom level we are.
      
      map.flyTo(locations.Boitsfort, 10);
    });
    $('#fly-to-ixelles2').on('click', function(){
      //$(all_buttons).removeClass('pure-button-disabled');
      // probably want something that looks at whether a marker is on the map, and at what zoom level we are.
      
      map.flyTo(locations.Ixelles2, 10);
    });
    $('#fly-to-ixelles1').on('click', function(){
      //$(all_buttons).removeClass('pure-button-disabled');
      // probably want something that looks at whether a marker is on the map, and at what zoom level we are.
      
      map.flyTo(locations.Ixelles1, 10);
    });
    $('#fly-to-berg').on('click', function(){
      //$(all_buttons).removeClass('pure-button-disabled');
      // probably want something that looks at whether a marker is on the map, and at what zoom level we are.
      
      map.flyTo(locations.Berg, 10);
    }); 

  </script>
</body>
</html>